{% extends "general_layout.html" %}

{% block page %}
<section class="section">

    <h1 class="title">Sequence Alignment</h1>
    <div class="columns">
      <div class="column is-half">
      <span class="description">Choose or upload a sequence to allign:</span>
      <form action="http://localhost:5000/submit-data" method="POST" enctype="multipart/form-data">
        <div class="columns">

          <div class="column is-four-fifths is-desktop">
            <div class="field">
              <div class="control is-medium is-loading">  <!-- TODO loading for checking input -->
                <label>
                  <textarea class="textarea is-medium" placeholder="Sequence Input" name="sequence-text"></textarea>
                </label>
              </div>
            </div>
          </div>

          <div class="column">

            <div class="field">
              <div class="control has-icons-left">
                <div class="select is-rounded">
                  <select id="sequence-choices">
                    <option selected="selected">None</option>
                    <option>Sequence 1</option>
                    <option>Sequence 2</option>
                    <option>Sequence 3</option>
                  </select>
                </div>
                <div class="icon is-small is-left">
                  <i class="fas fa-dna"></i>
                </div>
              </div>
            </div>

            <div id="upload-zone" class="">
              <div class="file has-name is-boxed">
                <label class="file-label">
                  <input class="file-input" type="file" name="file">
                  <span class="file-cta">
                    <span class="file-icon"><i class="fas fa-upload"></i></span>
                    <span class="file-label">Choose a fileâ€¦</span>
                  </span>
                  <span class="file-name"></span>
                </label>
              </div>
            </div>

          </div>

        </div>

        <span class="description">Alignment Options:</span>
        <div class="container">
          <label class="checkbox">
            <input type="checkbox"> Option 1
            <input type="checkbox"> Option 2
            <input type="checkbox"> Option 3
          </label>
        </div>
        <br>

        <span class="description">Output Options:</span>
        <div class="container">
          <label class="checkbox">
            <input type="checkbox"> Option 1
            <input type="checkbox"> Option 2
            <input type="checkbox"> Option 3
          </label>
        </div>
        <br>
        <div class="field">
          <p class="control">
            <button class="button is-primary" type="submit" onclick="addProgressBar()">Analyze</button>
          </p>
        </div>

        <div id="progress-bar-div"></div>

      </form>
      </div>

      <div class="column is-half">
        <div class="centered-img">
          <img src="{{ phylo_image }}">
        </div>
      </div>

    </div>
</section>

{% endblock %}

{% block scripts %}

<script>
  const fileInput = document.querySelector('#upload-zone input[type=file]');
  fileInput.onchange = () => {
    if (fileInput.files.length > 0) {
      const fileName = document.querySelector('#upload-zone .file-name');
      fileName.textContent = fileInput.files[0].name;
    }
  }
</script>

{% endblock %}